{"version":3,"sources":["test/base.test.ts"],"names":[],"mappings":"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","file":"base.test.js","sourcesContent":["import {Suite, Test, SuiteSetup, SuiteTeardown, Setup, Teardown, TestContainer} from 'jest-decorators'\nimport {Scope, ApplicationScope, SessionScope, RequestScope, SessionIdentifier} from '..'\nimport {ProviderContainer, DependencyContainer, ApplicationContext, NodeDispatcher} from '..'\n\nclass A {\n  private value: number = 100 \n\n  public getValue(): number {\n    return this.value\n  }\n\n  protected onDestroy() {\n    this.value = 0\n  }\n}\n\nclass B {\n  private a2: A\n  private a4: A\n  private value: number = 100\n\n  constructor(\n    @ApplicationScope('a') private a1: A,\n    @SessionScope    ('a') private a3: A\n  ) {\n  }\n\n  public getA1() {\n    return this.a1\n  }\n\n  public getA2() {\n    return this.a2\n  }\n\n  public getA3() {\n    return this.a3\n  }\n\n  public getA4() {\n    return this.a4\n  }\n\n  public setA2(@ApplicationScope('a') a: A) {\n    this.a2 = a\n  }\n\n  public setA4(@RequestScope('a') a: A) {\n    this.a4 = a\n  }\n\n  public getValue(): number {\n    return this.value\n  }\n\n  protected onDestroy() {\n    this.value = 0\n  }\n}\n\n@Suite\nclass ApplicationTest {\n  private b: B\n  private dispatcher: NodeDispatcher\n\n  @SuiteSetup\n  private suiteSetup() {\n    this.dispatcher = NodeDispatcher.create(\n      ProviderContainer.instance, DependencyContainer.instance, new ApplicationContext())\n    ProviderContainer.instance.set(Scope.APPLICATION, 'a', () => new A)\n    ProviderContainer.instance.set(Scope.SESSION,     'a', () => new A)\n    ProviderContainer.instance.set(Scope.REQUEST,     'a', () => new A)\n    this.dispatcher.check()\n    this.dispatcher.createApplicationContext()\n    this.b = this.dispatcher.createInstanceOnApplicationLocal(B)\n  }\n\n  @SuiteTeardown\n  private teardown() {\n    this.b = null\n    ProviderContainer.instance.delete(Scope.APPLICATION, 'a')\n    ProviderContainer.instance.delete(Scope.SESSION,     'a')\n    ProviderContainer.instance.delete(Scope.REQUEST,     'a')\n  }\n\n  @Test\n  private value() {\n    expect(this.b.getValue()).toBe(100)\n  }\n\n  @Test\n  private a1() {\n    expect(this.b.getA1().getValue()).toBe(100)\n  }\n\n  @Test\n  private a2() {\n    this.dispatcher.applyOnApplicationLocal(this.b, 'setA2')\n    expect(this.b.getA2().getValue()).toBe(100)\n  }\n\n  @Test\n  private a3() {\n    expect(this.b.getA3()).toBe(undefined)\n  }\n\n  @Test\n  private a4() {\n    expect(this.b.getA4()).toBe(undefined)\n  }\n\n  @Test\n  private equalA1A2() {\n    expect(this.b.getA1()).toBe(this.b.getA2())\n  }\n\n  @Test\n  private destroy() {\n    this.dispatcher.destroyApplicationContext()\n    expect(this.b.getA1().getValue()).toBe(0)\n    expect(this.b.getA2().getValue()).toBe(0)\n    expect(this.b.getValue()).toBe(0)\n  }\n}\n\n@Suite\nclass SessionTest {\n  private b: B\n  private session: SessionIdentifier\n  private dispatcher: NodeDispatcher\n\n  @SuiteSetup\n  private suiteSetup() {\n    this.dispatcher = NodeDispatcher.create(\n      ProviderContainer.instance, DependencyContainer.instance, new ApplicationContext())\n    ProviderContainer.instance.set(Scope.APPLICATION, 'a', () => new A)\n    ProviderContainer.instance.set(Scope.SESSION,     'a', () => new A)\n    ProviderContainer.instance.set(Scope.REQUEST,     'a', () => new A)\n    this.dispatcher.check()\n    this.dispatcher.createApplicationContext()\n    this.session = this.dispatcher.createSessionContext()\n    this.b = this.dispatcher.createInstanceOnSessionLocal(B, this.session)\n  }\n\n  @SuiteTeardown\n  private teardown() {\n    this.b = null\n    ProviderContainer.instance.delete(Scope.APPLICATION, 'a')\n    ProviderContainer.instance.delete(Scope.SESSION,     'a')\n    ProviderContainer.instance.delete(Scope.REQUEST,     'a')\n  }\n\n  @Test\n  private value() {\n    expect(this.b.getValue()).toBe(100)\n  }\n\n  @Test\n  private a1() {\n    expect(this.b.getA1().getValue()).toBe(100)\n  }\n\n  @Test\n  private a2() {\n    this.dispatcher.applyOnApplicationLocal(this.b, 'setA2')\n    expect(this.b.getA2().getValue()).toBe(100)\n  }\n\n  @Test\n  private a3() {\n    expect(this.b.getA3().getValue()).toBe(100)\n  }\n\n  @Test\n  private a4() {\n    expect(this.b.getA4()).toBe(undefined)\n  }\n\n  @Test\n  private equalA1A2() {\n    expect(this.b.getA1()).toBe(this.b.getA2())\n  }\n\n  @Test\n  private notEqualA1A3() {\n    expect(this.b.getA1()).not.toBe(this.b.getA3())\n  }\n\n  @Test\n  private destroySession() {\n    this.dispatcher.destroySessionContext(this.session) \n    expect(this.b.getA3().getValue()).toBe(0)\n    expect(this.b.getValue()).toBe(0)\n  }\n\n  @Test\n  private destroyApplication() {\n    this.dispatcher.destroyApplicationContext()\n    expect(this.b.getA1().getValue()).toBe(0)\n    expect(this.b.getA2().getValue()).toBe(0)\n  }\n}\n\n@Suite\nclass RequestTest {\n  private b: B\n  private session: SessionIdentifier\n  private request: SessionIdentifier\n  private dispatcher: NodeDispatcher\n\n  @SuiteSetup\n  private suiteSetup() {\n    this.dispatcher = NodeDispatcher.create(\n      ProviderContainer.instance, DependencyContainer.instance, new ApplicationContext())\n    ProviderContainer.instance.set(Scope.APPLICATION, 'a', () => new A)\n    ProviderContainer.instance.set(Scope.SESSION,     'a', () => new A)\n    ProviderContainer.instance.set(Scope.REQUEST,     'a', () => new A)\n    this.dispatcher.check()\n    this.dispatcher.createApplicationContext()\n    this.session = this.dispatcher.createSessionContext()\n    this.request = this.dispatcher.createRequestContext(this.session)\n    this.b = this.dispatcher.createInstanceOnRequestLocal(B, this.session, this.request)\n  }\n\n  @SuiteTeardown\n  private teardown() {\n    this.b = null\n    ProviderContainer.instance.delete(Scope.APPLICATION, 'a')\n    ProviderContainer.instance.delete(Scope.SESSION, 'a')\n    ProviderContainer.instance.delete(Scope.REQUEST, 'a')\n  }\n\n  @Test\n  private value() {\n    expect(this.b.getValue()).toBe(100)\n  }\n\n  @Test\n  private a1() {\n    expect(this.b.getA1().getValue()).toBe(100)\n  }\n\n  @Test\n  private a2() {\n    this.dispatcher.applyOnApplicationLocal(this.b, 'setA2')\n    expect(this.b.getA2().getValue()).toBe(100)\n  }\n\n  @Test\n  private a3() {\n    expect(this.b.getA3().getValue()).toBe(100)\n  }\n\n  @Test\n  private a4() {\n    this.dispatcher.applyOnRequestLocal(this.b, 'setA4', this.session, this.request)\n    expect(this.b.getA4().getValue()).toBe(100)\n  }\n\n  @Test\n  private equalA1A2() {\n    expect(this.b.getA1()).toBe(this.b.getA2())\n  }\n\n  @Test\n  private notEqualA1A3() {\n    expect(this.b.getA1()).not.toBe(this.b.getA3())\n  }\n\n  @Test\n  private notEqualA1A4() {\n    expect(this.b.getA1()).not.toBe(this.b.getA4())\n  }\n\n  @Test\n  private notEqualA3A4() {\n    expect(this.b.getA3()).not.toBe(this.b.getA4())\n  }\n\n  @Test\n  private destroyRequest() {\n    this.dispatcher.destroyRequestContext(this.session, this.request) \n    expect(this.b.getA4().getValue()).toBe(0)\n    expect(this.b.getValue()).toBe(0)\n  }\n\n  @Test\n  private destroySession() {\n    this.dispatcher.destroySessionContext(this.session) \n    expect(this.b.getA3().getValue()).toBe(0)\n  }\n\n  @Test\n  private destroyApplication() {\n    this.dispatcher.destroyApplicationContext()\n    expect(this.b.getA1().getValue()).toBe(0)\n    expect(this.b.getA2().getValue()).toBe(0)\n  }\n}\n\nTestContainer.run()\n\n"]}