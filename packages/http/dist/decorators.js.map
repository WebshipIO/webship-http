{"version":3,"sources":["decorators.ts"],"names":[],"mappings":"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","file":"decorators.js","sourcesContent":["import {Node} from '@webnode/cdi'\nimport {AutoMethod, AutoMethodProperties, ParameterPoint} from './automethod'\nimport {Route} from './route'\nimport {Registry} from './registry'\nimport {Event} from './event'\nimport {HttpMethod, RePathname, RePathnameParams} from './request'\nimport {HttpStatus} from './response'\n\nexport type PropertyKey = string | symbol\n\nexport function Controller(node: Node): Node {\n  Registry.instance.registerRouteNode(node)\n  return node\n}\n\nexport function RequestLifecycle(node: Node): Node {\n  Registry.instance.registerEventNode(node)\n  return node\n}\n\nexport function RequestMapping(method: HttpMethod, rePathname: RePathname): MethodDecorator {\n  return function (target: Object, propertyKey: PropertyKey, descriptor: PropertyDescriptor) {\n    Registry.instance.registerRoute(target.constructor as Node, descriptor.value, method, rePathname)\n  }\n}\n\nexport function Middleware(middleware: AutoMethod): MethodDecorator {\n  return function (target: Object, propertyKey: PropertyKey, descriptor: PropertyDescriptor) {\n    Registry.instance.registerMiddleware(target.constructor as Node, middleware)\n  }\n}\n\nexport function ParameterMapping(point: ParameterPoint): ParameterDecorator {\n  return function (target: Object, propertyKey: PropertyKey, parameterIndex: number) {\n    Registry.instance.registerParameter(\n      target.constructor as Node, \n      Reflect.get(target, propertyKey), \n      parameterIndex, \n      point)\n  }\n}\n\nexport function createMiddleware(middleware: AutoMethod): MethodDecorator {\n  return function (target: Object, propertyKey: PropertyKey, descriptor: PropertyDescriptor) {\n    Registry.instance.registerMiddleware(target.constructor as Node, middleware)\n  }\n}\n\nexport function ResStatus(status: HttpStatus): MethodDecorator {\n  return function (target: Object, propertyKey: string, descriptor: PropertyDescriptor) {\n    Registry.instance.registerResponseStatus(target.constructor as Node, descriptor.value, status)\n  }\n}\n\nexport function RequestStart(target: Object, propertyKey: PropertyKey, descriptor: PropertyDescriptor) {\n  Registry.instance.registerEvent(target.constructor as Node, descriptor.value, Event.REQUEST_START)\n}\n\nexport function RequestEnd(target: Object, propertyKey: PropertyKey, descriptor: PropertyDescriptor) {\n  Registry.instance.registerEvent(target.constructor as Node, descriptor.value, Event.REQUEST_END)\n}\n\nexport function RequestError(target: Object, propertyKey: PropertyKey, descriptor: PropertyDescriptor) {\n  Registry.instance.registerEvent(target.constructor as Node, descriptor.value, Event.REQUEST_ERROR)\n}\n\nexport function Get(requestRePathname: string): MethodDecorator {\n  return RequestMapping('GET', requestRePathname)\n}\n\nexport function Post(requestRePathname: string): MethodDecorator {\n  return RequestMapping('POST', requestRePathname)\n}\n\nexport function Put(requestRePathname: string): MethodDecorator {\n  return RequestMapping('PUT', requestRePathname)\n}\n\nexport function Delete(requestRePathname: string): MethodDecorator {\n  return RequestMapping('DELETE', requestRePathname)\n}\n\nexport function Head(requestRePathname: string): MethodDecorator {\n  return RequestMapping('HEAD', requestRePathname)\n}\n\nexport function Trace(requestRePathname: string): MethodDecorator {\n  return RequestMapping('TRACE', requestRePathname)\n}\n\nexport function Options(requestRePathname: string): MethodDecorator {\n  return RequestMapping('OPTIONS', requestRePathname)\n}\n\nexport function Connect(requestRePathname: string): MethodDecorator {\n  return RequestMapping('CONNECT', requestRePathname)\n}\n\nexport function Patch(requestRePathname: string): MethodDecorator {\n  return RequestMapping('PATCH', requestRePathname)\n}\n\nexport function Req(target: Object, propertyKey: PropertyKey, parameterIndex: number) {\n  return ParameterMapping(ParameterPoint.REQUEST)(target, propertyKey, parameterIndex)\n}\n\nexport function Res(target: Object, propertyKey: PropertyKey, parameterIndex: number) {\n  return ParameterMapping(ParameterPoint.RESPONSE)(target, propertyKey, parameterIndex)\n}\n\nexport function Uri(target: Object, propertyKey: PropertyKey, parameterIndex: number) {\n  return ParameterMapping(ParameterPoint.REQUEST_URI)(target, propertyKey, parameterIndex)\n}\n\nexport function Headers(target: Object, propertyKey: PropertyKey, parameterIndex: number) {\n  return ParameterMapping(ParameterPoint.REQUEST_HEADERS)(target, propertyKey, parameterIndex)\n}\n\nexport function Params(target: Object, propertyKey: PropertyKey, parameterIndex: number) {\n  return ParameterMapping(ParameterPoint.REQUEST_PARAMS)(target, propertyKey, parameterIndex)\n}\n\nexport function Query(target: Object, propertyKey: PropertyKey, parameterIndex: number) {\n  return ParameterMapping(ParameterPoint.REQUEST_QUERY)(target, propertyKey, parameterIndex)\n}\n\nexport function ReqBody(target: Object, propertyKey: PropertyKey, parameterIndex: number) {\n  return ParameterMapping(ParameterPoint.REQUEST_BODY)(target, propertyKey, parameterIndex)\n}"]}